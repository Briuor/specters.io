/*! For license information please see bundle.fad3f02f9741d95c203c.js.LICENSE.txt */
(()=>{var e,t,n={695:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ClientChannel=void 0;var a=n(465),s=n(178),u=i(n(409)),l=i(n(953)),c=function(){function e(e,t,n,r,o){var i=this;this.userData={},this.receivedReliableMessages=[],this.url=n?e+":"+n:e,this.connectionsManager=new l.default(this.url,t,r,o),this.bridge=this.connectionsManager.bridge,this.bridge.on(s.EVENTS.DISCONNECTED,(function(){return i.bridge.removeAllListeners()}))}return e.prototype.onconnectionstatechange=function(){var e=this,t=this.peerConnection.localPeerConnection;t.onconnectionstatechange=function(){"disconnected"!==t.connectionState&&"closed"!==t.connectionState||e.bridge.emit(s.EVENTS.DISCONNECTED)}},Object.defineProperty(e.prototype,"id",{get:function(){return this.peerConnection.id},enumerable:!1,configurable:!0}),e.prototype.close=function(){this.peerConnection.localPeerConnection.close(),this.bridge.emit(s.EVENTS.DISCONNECTED);try{var e=this.url+"/.wrtc/v1";fetch(e+"/connections/"+this.id+"/close",{method:"POST",headers:{"Content-Type":"application/json"}})}catch(e){console.error(e.message)}},e.prototype.emit=function(e,t,n){var r=this;void 0===t&&(t=null),n&&n.reliable?a.makeReliable(n,(function(n){return r.connectionsManager.emit(e,{MESSAGE:t,RELIABLE:1,ID:n})})):this.connectionsManager.emit(e,t)},Object.defineProperty(e.prototype,"raw",{get:function(){var e=this;return{emit:function(t){return e.emit(s.EVENTS.RAW_MESSAGE,t)}}},enumerable:!1,configurable:!0}),e.prototype.onRaw=function(e){this.bridge.on(s.EVENTS.RAW_MESSAGE,(function(t){!function(t){e(t)}(t)}))},e.prototype.onConnect=function(e){var t;return r(this,void 0,void 0,(function(){var n;return o(this,(function(r){switch(r.label){case 0:return this.peerConnection=new u.default,[4,this.peerConnection.connect(this.connectionsManager)];case 1:return(n=r.sent()).error?e(n.error):(n.userData&&(this.userData=n.userData),this.maxMessageSize=this.connectionsManager.maxMessageSize=null===(t=this.peerConnection.localPeerConnection.sctp)||void 0===t?void 0:t.maxMessageSize,this.onconnectionstatechange(),e()),[2]}}))}))},e.prototype.onDisconnect=function(e){this.bridge.on(s.EVENTS.DISCONNECTED,e)},e.prototype.on=function(e,t){var n=this;this.bridge.on(e,(function(e){var r;e&&1===e.RELIABLE&&"undefined"!==e.ID?(r=(new Date).getTime(),n.receivedReliableMessages.forEach((function(e,t,n){e.expire<=r&&n.splice(t,1)})),0===n.receivedReliableMessages.filter((function(t){return t.id===e.ID})).length&&(n.receivedReliableMessages.push({id:e.ID,timestamp:new Date,expire:(new Date).getTime()+15e3}),t(e.MESSAGE))):t(e)}))},e}();t.ClientChannel=c,t.default=function(e){void 0===e&&(e={});var t=e.iceServers,n=void 0===t?[]:t,r=e.iceTransportPolicy,o=void 0===r?"all":r,i=e.url,a=void 0===i?location.protocol+"//"+location.hostname:i,s=e.authorization,u=void 0===s?void 0:s,l=e.port,d=void 0===l?9208:l,f=e.label;return new c(a,u,d,void 0===f?"geckos.io":f,{iceServers:n,iceTransportPolicy:o})}},472:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var a=i(n(695));t.default=a.default},953:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(694),u=a(n(592)),l=a(n(706)),c=function(){function e(e,t,n,r){var o=this;this.url=e,this.authorization=t,this.label=n,this.rtcConfiguration=r,this.bridge=new s.Bridge,this.onDataChannel=function(e){var t=e.channel;t.label===o.label&&(o.dataChannel=t,o.dataChannel.binaryType="arraybuffer",o.dataChannel.onmessage=function(e){var t=u.default(e),n=t.key,r=t.data;o.bridge.emit(n,r)})}}return e.prototype.emit=function(e,t){void 0===t&&(t=null),l.default(this.dataChannel,this.maxMessageSize,e,t)},e.prototype.fetchAdditionalCandidates=function(e,t){return o(this,void 0,void 0,(function(){var n,r=this;return i(this,(function(o){switch(o.label){case 0:return[4,fetch(e+"/connections/"+t+"/additional-candidates",{method:"GET",headers:{"Content-Type":"application/json"}})];case 1:return(n=o.sent()).ok?[4,n.json()]:[3,3];case 2:o.sent().forEach((function(e){r.localPeerConnection.addIceCandidate(e)})),o.label=3;case 3:return[2]}}))}))},e.prototype.connect=function(){return o(this,void 0,void 0,(function(){var e,t,n,o,a,s,u,l,c,d,f,_,h,p,m,v,y=this;return i(this,(function(i){switch(i.label){case 0:e=this.url+"/.wrtc/v1",t={"Content-Type":"application/json"},this.authorization&&(t=r(r({},t),((v={}).Authorization=this.authorization,v))),n={},i.label=1;case 1:return i.trys.push([1,4,,5]),[4,fetch(e+"/connections",{method:"POST",headers:t})];case 2:return[4,i.sent().json()];case 3:return o=i.sent(),n=o.userData,this.remotePeerConnection=o,[3,5];case 4:return a=i.sent(),console.error(a.message),[2,{error:a}];case 5:s=this.remotePeerConnection,u=s.id,l=s.localDescription,c=r({sdpSemantics:"unified-plan"},this.rtcConfiguration),d=RTCPeerConnection||webkitRTCPeerConnection||mozRTCPeerConnection,this.localPeerConnection=new d(c),(void 0===g&&(g=10),void 0===w&&(w=50),void 0===b&&(b=1.8),void 0===A&&(A=20),Array(g).fill(0).map((function(e,t){return parseInt((w*Math.pow(b,t)).toString())+parseInt((Math.random()*A).toString())}))).forEach((function(t){setTimeout((function(){y.fetchAdditionalCandidates(e,u)}),t)})),i.label=6;case 6:return i.trys.push([6,16,,17]),[4,this.localPeerConnection.setRemoteDescription(l)];case 7:return i.sent(),this.localPeerConnection.addEventListener("datachannel",this.onDataChannel,{once:!0}),[4,this.localPeerConnection.createAnswer()];case 8:return f=i.sent(),_=new RTCSessionDescription({type:"answer",sdp:f.sdp}),[4,this.localPeerConnection.setLocalDescription(_)];case 9:i.sent(),i.label=10;case 10:return i.trys.push([10,12,,13]),[4,fetch(e+"/connections/"+u+"/remote-description",{method:"POST",body:JSON.stringify(this.localPeerConnection.localDescription),headers:{"Content-Type":"application/json"}})];case 11:return i.sent(),[3,13];case 12:return h=i.sent(),console.error(h.message),[2,{error:h}];case 13:return p=function(){return new Promise((function(e){y.localPeerConnection.addEventListener("datachannel",(function(){e()}),{once:!0})}))},this.dataChannel?[3,15]:[4,p()];case 14:i.sent(),i.label=15;case 15:return[2,{userData:n,localPeerConnection:this.localPeerConnection,dataChannel:this.dataChannel,id:u}];case 16:return m=i.sent(),console.error(m.message),this.localPeerConnection.close(),[2,{error:m}];case 17:return[2]}var g,w,b,A}))}))},e}();t.default=c},409:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(178),a=function(){function e(){}return e.prototype.connect=function(e){return r(this,void 0,void 0,(function(){var t,n,r,a,s,u;return o(this,(function(o){switch(o.label){case 0:return RTCPeerConnection||webkitRTCPeerConnection||mozRTCPeerConnection?[4,e.connect()]:[3,2];case 1:return t=o.sent(),n=t.localPeerConnection,r=t.dataChannel,a=t.id,s=t.userData,(u=t.error)?[2,{error:u}]:n&&r&&a&&s?(this.localPeerConnection=n,this.dataChannel=r,this.id=a,[2,{userData:s}]):[2,{error:new Error('Something went wrong in "await connectionsManager.connect()"')}];case 2:return u=new Error(i.ERRORS.BROWSER_NOT_SUPPORTED),console.error(u.message),[2,{error:u}]}}))}))},e}();t.default=a},694:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Bridge=void 0;var o=r(n(729)),i=function(){function e(){this.eventEmitter=new o.default}return e.prototype.emit=function(e,t,n){void 0===n&&(n={}),this.eventEmitter.emit(e,t,n)},e.prototype.on=function(e,t){return this.eventEmitter.on(e,(function(e,n){t(e,n)}))},e.prototype.removeAllListeners=function(){this.eventEmitter.removeAllListeners()},e}();t.Bridge=i;var a=new i;t.default=a},178:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ERRORS=t.EVENTS=void 0,t.EVENTS={SEND_OVER_DATA_CHANNEL:"sendOverDataChannel",RECEIVED_FROM_DATA_CHANNEL:"receiveFromDataChannel",DISCONNECTED:"disconnected",DISCONNECT:"disconnect",CONNECTION:"connection",CONNECT:"connect",ERROR:"error",DATA_CHANNEL_IS_OPEN:"dataChannelIsOpen",RAW_MESSAGE:"rawMessage",DROP:"dropped"},t.ERRORS={BROWSER_NOT_SUPPORTED:"BROWSER_NOT_SUPPORTED",COULD_NOT_PARSE_MESSAGE:"COULD_NOT_PARSE_MESSAGE",DROPPED_FROM_BUFFERING:"DROPPED_FROM_BUFFERING",MAX_MESSAGE_SIZE_EXCEEDED:"MAX_MESSAGE_SIZE_EXCEEDED"}},233:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isJSONString=t.isObject=t.isRawMessage=void 0;var r=n(572);t.isRawMessage=function(e){return"string"==typeof e||e instanceof ArrayBuffer||e instanceof r.ArrayBufferView},t.isObject=function(e){return"object"==typeof e},t.isJSONString=function(e){try{return"string"==typeof e&&!!isNaN(parseInt(e))&&(JSON.parse(e),!0)}catch(e){return!1}}},811:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){void 0===e&&(e=24);for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="",r=0;r<e;r++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}},592:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(178),o=n(233);t.default=function(e){var t,n,i=e.data,a=o.isJSONString(i);return!a&&o.isRawMessage(i)?(t=r.EVENTS.RAW_MESSAGE,n=i):a?n=(i=JSON.parse(i))[t=Object.keys(i)[0]]:(t="error",n=new Error(r.ERRORS.COULD_NOT_PARSE_MESSAGE)),{key:t,data:n}}},465:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.makeReliable=void 0;var o=r(n(811)),i=r(n(943));t.makeReliable=function(e,t){var n=e.interval,r=void 0===n?150:n,a=e.runs,s=void 0===a?10:a,u=o.default(24);i.default(r,s,(function(){t(u)}))}},943:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){void 0===e&&(e=200),void 0===t&&(t=1);var r=0;if("function"==typeof n){var o=setInterval((function(){n(),++r==t-1&&clearInterval(o)}),e);n()}else console.error("You have to define your callback function!")}},706:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(233),o=n(178);t.default=function(e,t,n,i){var a;void 0===i&&(i=null);var s=function(n){var r,o=null!==(r=n.byteLength)&&void 0!==r?r:2*n.length;if("number"==typeof t&&o>t)throw new Error("maxMessageSize of "+t+" exceeded");Promise.resolve().then((function(){e.send(n)}))};if("open"===e.readyState)try{n===o.EVENTS.RAW_MESSAGE&&null!==i&&r.isRawMessage(i)?s(i):s(JSON.stringify(((a={})[n]=i,a)))}catch(e){return console.error("Error in sendMessage.ts: ",e.message),e}}},572:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ArrayBufferView=void 0;var n=Object.getPrototypeOf(Object.getPrototypeOf(new Uint8Array)).constructor;t.ArrayBufferView=n},480:e=>{function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}var o=function(){function e(n,r){t(this,e),this.count=0,this.delay=r,this.frame_set=n,this.frame_index=0,this.frame_value=n[0]}return r(e,[{key:"animate",value:function(){this.count++,this.count>this.delay&&(this.count=0,this.frame_index=this.frame_index==this.frame_set.length-1?0:this.frame_index+1,this.frame_value=this.frame_set[this.frame_index])}}]),e}();e.exports=function(){function e(n,r,i){t(this,e),this.y=0,this.x=0,this.w=n,this.h=r,this.maxX=i.cols*i.tsize-n,this.maxY=i.rows*i.tsize-r,this.following=null,this.tilesetImage=null,this.animations={22:new o([22,23,24,25,26,38],16),28:new o([29,30,31,32,38,28],16),33:new o([38,33,34,35,36,37],16)}}return r(e,[{key:"follow",value:function(e){this.following=e,e.screenX=this.w/2,e.screenY=this.h/2}},{key:"update",value:function(){this.x=this.following.x-this.w/2,this.y=this.following.y-this.h/2}},{key:"draw",value:function(e,t){Object.values(this.animations).forEach((function(e){e.animate()}));for(var n=Math.floor(this.x/t.tsize),r=n+this.w/t.tsize+1,o=Math.floor(this.y/t.tsize),i=o+this.h/t.tsize+1,a=-this.x+n*t.tsize,s=-this.y+o*t.tsize,u=n;u<=r;u++)for(var l=o;l<=i;l++){var c=t.getTile(u,l),d=(u-n)*t.tsize+a,f=(l-o)*t.tsize+s;38==c||15==c?(e.fillStyle=15==c?"#252525":"#ff0000",e.fillRect(Math.floor(d),Math.floor(f),t.tsize,t.tsize)):(this.animations[c]&&(c=this.animations[c].frame_value),c-=1,e.drawImage(this.tilesetImage,c*t.tsize,0,t.tsize,t.tsize,Math.floor(d),Math.floor(f),t.tsize,t.tsize))}}}]),e}()},431:(e,t,n)=>{function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=n(522),i=n(480),a=n(483),s=n(635),u=n(581),l=n(400),c=(n(766).Howl,n(556).validateName),d=n(525);e.exports=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.leaderBoardWrapper=document.getElementById("leaderboard-wrapper"),this.leaderBoard=document.getElementById("leaderboard"),this.playAgainModal=document.getElementById("play-again-modal"),this.playAgainForm=document.getElementById("play-again-form"),this.namePlayAgainTextField=document.getElementById("name-play-again"),this.killsElement=document.getElementById("kills"),this.playAgainForm.addEventListener("submit",(function(e){e.preventDefault(),t.playAgainModal.style.display="none",t.init(),t.start(c(t.namePlayAgainTextField.value))})),this.canvas=document.getElementById("canvas"),this.canvas.style.background="black",this.ctx=this.canvas.getContext("2d"),this.loader=new d,this.kills=0,this.gameWidth=640,this.gameHeight=360,this.cwidth=window.innerWidth-4,this.cheight=window.innerHeight-4,this.resizeCanvas.bind(this),window.addEventListener("resize",(function(){t.resizeCanvas()})),this.init()}var t,n;return t=e,(n=[{key:"init",value:function(){var e=this;this.map=new o,this.camera=new i(this.gameWidth,this.gameHeight,this.map),this.state=new a,this.network=new l,window.onbeforeunload=function(){e.network.channel.close()},this.render=new s,this.input=new u,this.loopRef=null,this.gameOver=this.gameOver.bind(this),this.resizeCanvas()}},{key:"resizeCanvas",value:function(){this.cwidth=window.innerWidth-4,this.cheight=window.innerHeight-4;var e=16/9;this.cheight<this.cwidth/e?this.cwidth=this.cheight*e:this.cheight=this.cwidth/e,this.canvas.width=this.gameWidth,this.canvas.height=this.gameHeight,this.canvas.style.width=this.cwidth+"px",this.canvas.style.height=this.cheight+"px",this.ctx.mozImageSmoothingEnabled=!1,this.ctx.webkitImageSmoothingEnabled=!1,this.ctx.msImageSmoothingEnabled=!1,this.ctx.imageSmoothingEnabled=!1,this.leaderBoardWrapper.style.marginRight=this.canvas.getBoundingClientRect().left}},{key:"updateLeaderBoard",value:function(e,t){for(var n=t.leaderBoard.children,r=0;r<n.length;r++){var o=e[r],i=n[r].children[0],a=n[r].children[1],s="";o?(o.id==t.render.meId&&(s=">"),i.innerText=s+(5==r?"?.-":r+1+"."+o.name),a.innerText=o.score):(i.innerText=s+(5==r?"?.-":r+1+".-"),a.innerText="-")}t.leaderBoardWrapper.style.marginRight=t.canvas.getBoundingClientRect().left}},{key:"gameOver",value:function(){this.network.channel.close(),clearInterval(this.loopRef),this.playAgainModal.style.display="block",this.killsElement.innerText=this.kills+" Kills",this.namePlayAgainTextField.value=localStorage.getItem("name")?localStorage.getItem("name"):"unnamed"}},{key:"run",value:function(){var e=this.state.getCurrentState(),t=e.me,n=e.otherPlayers,r=e.bullets;t&&(this.kills=t.kills,this.camera.follow(t),this.camera.update(),this.camera.following.scX=this.cwidth/2,this.camera.following.scY=this.cheight/2,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.camera.draw(this.ctx,this.map),this.render.drawPlayer(this.ctx,t,this.gameOver,this.kills),this.render.drawPlayers(this.ctx,n,r,this.camera))}},{key:"start",value:function(e){var t=this;this.canvas.style.display="block",this.network.start(e),this.input.listen(this.network,this.camera,this.canvas),Promise.all([this.loader.loadImage("ghost","images/ghost.png"),this.loader.loadImage("tileset","images/tileset.png"),this.loader.loadImage("projectile","images/projectile.png"),this.network.connect(this.state,this.loopRef,this.render,this.updateLeaderBoard,this)]).then((function(){t.loopRef=setInterval(t.run.bind(t),1e3/60),t.render.playerImage=t.loader.getImage("ghost"),t.camera.tilesetImage=t.loader.getImage("tileset"),t.render.projectileImage=t.loader.getImage("projectile"),t.leaderBoardWrapper.style.marginRight=t.canvas.getBoundingClientRect().left,t.leaderBoardWrapper.style.display="block"}))}}])&&r(t.prototype,n),e}()},581:e=>{function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var n,r;return n=e,(r=[{key:"listen",value:function(e,t,n){var r=this;document.addEventListener("keydown",(function(t){return r.handleKeyBoardInput(t,!0,e)})),document.addEventListener("keyup",(function(t){return r.handleKeyBoardInput(t,!1,e)})),document.addEventListener("mousemove",(function(o){return r.handleMouseMove(o,e,t,n)}),!0),document.addEventListener("click",(function(){return r.handleMouseClick(e)}),!0)}},{key:"isDirection",value:function(e){return 68==e||39==e||83==e||40==e||65==e||37==e||87==e||38==e}},{key:"handleKeyBoardInput",value:function(e,t,n){console.log("input"),this.isDirection(e.which)&&n.channel.emit("ik",[e.which,t])}},{key:"handleMouseClick",value:function(e){e.channel.emit("imc")}},{key:"handleMouseMove",value:function(e,t,n,r){if(n.following){var o=e.clientX-r.getBoundingClientRect().left-n.following.scX,i=e.clientY-r.getBoundingClientRect().top-n.following.scY;t.channel.emit("imm",[o,i])}}}])&&t(n.prototype,r),e}()},400:(e,t,n)=>{function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=n(472).default;e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"start",value:function(e){var t=this;this.name=e,this.channel=o({port:443}),this.connectPromise=new Promise((function(e,n){t.channel.onConnect((function(r){r&&(console.error(r.message),n()),t.channel.emit("join",t.name),e(t.channel.id)}))}))}},{key:"connect",value:function(e,t,n,r,o){var i=this;this.connectPromise.then((function(a){n.meId=a,n.playerName=localStorage.getItem("name"),i.channel.on("update",(function(t){e.handleUpdate(t)})),i.channel.onDisconnect((function(){clearInterval(t)})),i.channel.on("leaderboard",(function(e){var t=e.map((function(e){return i.deserializeLeaderBoard(e)}));r(t,o)})),i.channel.on("attack",(function(e){n.attackList.push(e)})),i.channel.on("die",(function(e){n.dieList.push(e)}))}))}},{key:"deserializeLeaderBoard",value:function(e){return{id:e[0],name:e[1],score:e[2]}}}])&&r(t.prototype,n),e}()},994:e=>{function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.letters=letters={A:[[,1],[1,,1],[1,,1],[1,1,1],[1,,1]],B:[[1,1],[1,,1],[1,1,1],[1,,1],[1,1]],C:[[1,1,1],[1],[1],[1],[1,1,1]],D:[[1,1],[1,,1],[1,,1],[1,,1],[1,1]],E:[[1,1,1],[1],[1,1,1],[1],[1,1,1]],F:[[1,1,1],[1],[1,1],[1],[1]],G:[[,1,1],[1],[1,,1,1],[1,,,1],[,1,1]],H:[[1,,1],[1,,1],[1,1,1],[1,,1],[1,,1]],I:[[1,1,1],[,1],[,1],[,1],[1,1,1]],J:[[1,1,1],[,,1],[,,1],[1,,1],[1,1,1]],K:[[1,,,1],[1,,1],[1,1],[1,,1],[1,,,1]],L:[[1],[1],[1],[1],[1,1,1]],M:[[1,1,1,1,1],[1,,1,,1],[1,,1,,1],[1,,,,1],[1,,,,1]],N:[[1,,,1],[1,1,,1],[1,,1,1],[1,,,1],[1,,,1]],O:[[1,1,1],[1,,1],[1,,1],[1,,1],[1,1,1]],P:[[1,1,1],[1,,1],[1,1,1],[1],[1]],Q:[[0,1,1],[1,,,1],[1,,,1],[1,,1,1],[1,1,1,1]],R:[[1,1],[1,,1],[1,,1],[1,1],[1,,1]],S:[[1,1,1],[1],[1,1,1],[,,1],[1,1,1]],T:[[1,1,1],[,1],[,1],[,1],[,1]],U:[[1,,1],[1,,1],[1,,1],[1,,1],[1,1,1]],V:[[1,,,,1],[1,,,,1],[,1,,1],[,1,,1],[,,1]],W:[[1,,,,1],[1,,,,1],[1,,,,1],[1,,1,,1],[1,1,1,1,1]],X:[[1,,,,1],[,1,,1],[,,1],[,1,,1],[1,,,,1]],Y:[[1,,1],[1,,1],[,1],[,1],[,1]],Z:[[1,1,1,1,1],[,,,1],[,,1],[,1],[1,1,1,1,1]],0:[[1,1,1],[1,,1],[1,,1],[1,,1],[1,1,1]],1:[[,1],[,1],[,1],[,1],[,1]]," ":[[,,],[,,],[,,],[,,],[,,]]}}var n,r;return n=e,(r=[{key:"drawName",value:function(e,t,n,r,o){var i=[];t=t.toUpperCase();for(var a=0;a<t.length;a++){var s=this.letters[t.charAt(a)];s&&i.push(s)}e.fillStyle="#fff";var u=r;for(a=0;a<i.length;a++){s=i[a];for(var l=o,c=0,d=0;d<s.length;d++){for(var f=s[d],_=0;_<f.length;_++)f[_]&&e.fillRect(u+_*n,l,n,n);c=Math.max(c,f.length*n),l+=n}u+=n+c}}}])&&t(n.prototype,r),e}()},635:(e,t,n)=>{function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=n(994);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pixelCanvas=new o,this.attackList=[],this.dieList=[],this.meId="",this.playerName="Unammed",this.playerImage=null,this.currentFrame=0,this.animationTime=Date.now(),this.animationDuration=100,this.meRay=28,this.attackAnimation=!1,this.dieAnimation=!1,this.ocurrentFrame={},this.oanimationTime={},this.oanimationDuration=100,this.oattackAnimation={},this.odieAnimation={},this.projectileImage=null,this.bulletRay=10}var t,n;return t=e,(n=[{key:"drawPlayer",value:function(e,t,n,r){var o,i=this,a=4*r,s=180*t.angle/Math.PI;s<0&&(s=360+s),this.attackList.length>0&&this.attackList.includes(this.meId)&&(this.currentFrame=0,this.attackAnimation=!0,this.attackList.splice(this.attackList.findIndex((function(e){return i.meId==e})),1)),this.dieList.length>0&&this.dieList.includes(this.meId)?(this.attackAnimation=!1,this.currentFrame=0,this.dieAnimation=!0,this.dieList.splice(this.dieList.findIndex((function(e){return i.meId==e})),1)):o=s>=45&&s<135?this.attackAnimation?5:1:s>=135&&s<225?this.attackAnimation?6:2:s>=225&&s<315?this.attackAnimation?4:0:this.attackAnimation?7:3,this.dieAnimation&&(o=8);var u=this.attackAnimation?3:5;this.dieAnimation&&(u=5),Date.now()-this.animationDuration>=this.animationTime&&(this.currentFrame=this.currentFrame>=u?0:this.currentFrame+1,this.animationTime=Date.now()),this.dieAnimation&&this.currentFrame==u&&5==u&&(this.dieAnimation=!1,n()),this.attackAnimation&&this.currentFrame==u&&3==u&&(this.attackAnimation=!1);var l=a/2+this.meRay/2;e.drawImage(this.playerImage,this.currentFrame*this.meRay,26*o,this.meRay,26,t.screenX-l,t.screenY-l,this.meRay+a,26+a),this.pixelCanvas.drawName(e,this.playerName,1,Math.floor(t.screenX-2*this.playerName.length),Math.floor(t.screenY-l-7))}},{key:"drawPlayers",value:function(e,t,n,r){var o=this;t.forEach((function(t,n){return o.drawOther(e,t,r,t.id)})),n.forEach((function(t){return o.drawBullet(e,t,r)}))}},{key:"drawOther",value:function(e,t,n,r){var o=4*t.kills;null==this.oanimationTime[r]&&(this.oanimationTime[r]=0),null==this.ocurrentFrame[r]&&(this.ocurrentFrame[r]=0);var i,a=180*t.angle/Math.PI;a<0&&(a=360+a),this.attackList.length>0&&this.attackList.includes(t.id)&&(this.ocurrentFrame[r]=0,this.oattackAnimation[r]=!0,this.attackList.splice(this.attackList.findIndex((function(e){return t.id==e})),1)),this.dieList.length>0&&this.dieList.includes(t.id)&&(this.oattackAnimation[r]=!1,this.ocurrentFrame[r]=0,this.odieAnimation[r]=!0,this.dieList.splice(this.dieList.findIndex((function(e){return t.id==e})),1)),i=a>=45&&a<135?this.oattackAnimation[r]?5:1:a>=135&&a<225?this.oattackAnimation[r]?6:2:a>=225&&a<315?this.oattackAnimation[r]?4:0:this.oattackAnimation[r]?7:3,this.odieAnimation[r]&&(i=8);var s=this.oattackAnimation[r]?3:5;this.odieAnimation[r]&&(s=5),Date.now()-this.oanimationDuration>=this.oanimationTime[r]&&(this.ocurrentFrame[r]=this.ocurrentFrame[r]>=s?0:this.ocurrentFrame[r]+1,this.oanimationTime[r]=Date.now()),this.dieAnimation[r]&&this.currentFrame[r]==s&&5==s&&(this.dieAnimation[r]=!1),this.oattackAnimation[r]&&3==this.ocurrentFrame[r]&&3==s&&(this.oattackAnimation[r]=!1);var u=o/2+this.meRay/2;e.drawImage(this.playerImage,this.ocurrentFrame[r]*this.meRay,26*i,this.meRay,26,t.x-u-n.x,t.y-u-n.y,this.meRay+o,26+o),this.pixelCanvas.drawName(e,t.name,1,Math.floor(t.x-n.x-2*t.name.length),Math.floor(t.y-this.meRay-n.y+7))}},{key:"drawBullet",value:function(e,t,n){e.save(),e.translate(t.x-n.x,t.y-n.y),e.rotate(Math.PI+t.angle),e.translate(-(t.x-n.x),-(t.y-n.y)),console.log(t.r),e.drawImage(this.projectileImage,0,0,this.bulletRay,this.bulletRay,t.x-t.r/2-n.x,t.y-t.r-n.y,t.r,t.r),e.restore()}}])&&r(t.prototype,n),e}()},483:e=>{function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.firstServerTimestamp=0,this.gameStart=0,this.updates=[],this.RENDER_DELAY=100}var n,r;return n=e,(r=[{key:"currentServerTime",value:function(){return this.firstServerTimestamp+(Date.now()-this.gameStart)-this.RENDER_DELAY}},{key:"getBaseUpdate",value:function(){for(var e=this.currentServerTime(),t=this.updates.length-1;t>=0;t--)if(this.updates[t].t<=e)return t;return-1}},{key:"getCurrentState",value:function(){if(!this.firstServerTimestamp)return{};var e=this.getBaseUpdate(),t=this.currentServerTime();if(e<0||e===this.updates.length-1)return this.updates[this.updates.length-1];var n=this.updates[e],r=this.updates[e+1],o=(t-n.t)/(r.t-n.t);return{me:this.interpolateObject(n.me,r.me,o),otherPlayers:this.interpolateObjectArray(n.otherPlayers,r.otherPlayers,o),bullets:this.interpolateObjectArray(n.bullets,r.bullets,o)}}},{key:"interpolateObject",value:function(e,t,n){if(!t)return e;var r={};return Object.keys(e).forEach((function(o){r[o]="x"==o||"y"==o?e[o]+(t[o]-e[o])*n:t[o]})),r}},{key:"interpolateObjectArray",value:function(e,t,n){var r=this;return e.map((function(e){return r.interpolateObject(e,t.find((function(t){return e.id===t.id})),n)}))}},{key:"deserialize",value:function(e){var t=this;return{me:this.deserializeMe(e[0]),otherPlayers:e[1].map((function(e){return t.deserializeOthers(e)})),bullets:e[2].map((function(e){return t.deserializeBullet(e)})),t:e[3]}}},{key:"deserializeMe",value:function(e){return{x:e[0],y:e[1],angle:e[2],kills:e[3]}}},{key:"deserializeOthers",value:function(e){return{id:e[0],name:e[1],x:e[2],y:e[3],angle:e[4],kills:e[5]}}},{key:"deserializeBullet",value:function(e){return{id:e[0],x:e[1],y:e[2],angle:e[3],r:e[4]}}},{key:"deserializeLeaderBoard",value:function(e){return{name:e[0],score:e[1]}}},{key:"handleUpdate",value:function(e){var t=this.deserialize(e);this.firstServerTimestamp||(this.firstServerTimestamp=t.t,this.gameStart=Date.now()),this.updates.push(t);var n=this.getBaseUpdate();n>0&&this.updates.splice(0,n)}}])&&t(n.prototype,r),e}()},525:e=>{function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.images={}}var n,r;return n=e,(r=[{key:"loadImage",value:function(e,t){var n=this,r=new Image;return new Promise((function(o,i){n.images[e]=r,n.images[e].onload=function(){o(r)},n.images[e].onerror=function(){console.log("Error on load "+t),i(!1)},r.src=t}))}},{key:"getImage",value:function(e){return e in this.images?this.images[e]:null}}])&&t(n.prototype,r),e}()},556:e=>{e.exports={validateName:function(e){var t=e.trim();return console.log(t),t=""===t?"Unammed":t,localStorage.removeItem("name"),localStorage.setItem("name",t),t}}},522:e=>{function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cols=50,this.rows=50,this.tsize=57,this.tiles=[38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,10,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,9,38,38,38,38,38,38,38,38,38,38,38,38,38,38,6,16,21,5,16,11,16,16,16,20,5,1,16,16,2,16,16,5,16,11,16,5,5,16,16,16,5,5,5,13,16,16,16,16,16,4,38,38,38,38,38,38,38,38,38,38,38,38,38,38,6,1,4,28,6,16,16,16,16,4,22,6,16,5,16,16,4,33,6,16,4,33,33,16,15,4,33,22,28,6,11,16,21,5,16,4,38,38,38,38,38,38,38,38,38,38,38,38,38,38,6,16,4,33,6,16,16,16,16,11,3,16,4,22,6,11,16,3,16,16,16,2,16,16,11,4,28,10,3,16,16,16,8,22,6,4,38,38,38,38,38,38,38,38,38,38,38,38,38,38,6,16,16,3,16,16,5,16,16,16,16,5,16,16,16,5,5,16,16,1,5,5,5,16,16,16,3,16,16,2,16,4,22,28,6,4,38,38,38,38,38,38,38,38,38,38,38,38,38,38,6,16,16,16,16,4,28,6,18,16,4,28,6,16,4,28,22,6,16,4,22,28,33,6,20,16,16,20,20,20,16,16,3,3,16,4,38,38,38,38,38,38,38,38,38,38,38,38,38,38,6,16,5,16,16,4,22,6,16,16,16,3,16,16,17,3,3,16,11,4,33,28,10,20,16,5,5,5,1,20,16,18,16,15,2,4,38,38,38,38,38,38,38,38,38,38,38,38,38,38,6,4,28,6,16,16,3,16,16,16,1,16,5,5,17,17,17,17,19,4,22,28,6,20,4,22,28,33,6,20,11,16,16,16,1,4,38,38,38,38,38,38,38,38,38,38,38,38,38,38,6,16,3,16,1,16,5,5,5,16,16,4,22,33,6,19,17,16,13,16,3,3,16,16,16,3,3,3,15,16,16,16,5,13,18,4,38,38,38,38,38,38,38,38,38,38,38,38,38,38,6,16,16,16,16,4,33,28,33,6,16,15,21,16,16,16,1,16,5,5,16,11,12,14,13,11,16,16,20,12,20,4,22,6,16,4,38,38,38,38,38,38,38,38,38,38,38,38,38,38,6,16,16,16,16,4,22,22,28,6,16,14,5,5,5,16,2,4,28,28,6,19,16,5,5,11,16,5,5,5,20,4,28,6,16,4,38,38,38,38,38,38,38,38,38,38,38,38,38,38,6,16,16,5,16,16,3,3,3,16,16,4,38,33,33,6,16,4,33,28,6,16,4,33,28,6,4,22,28,22,6,16,3,16,16,4,38,38,38,38,38,38,38,38,38,38,38,38,38,38,6,16,4,28,6,16,16,16,16,16,11,4,28,22,33,6,16,16,3,3,16,15,4,22,33,6,4,33,10,3,16,2,16,16,16,4,38,38,38,38,38,38,38,38,38,38,38,38,38,38,6,16,16,3,16,16,5,5,5,16,13,4,28,33,33,6,16,16,5,16,19,16,16,3,3,16,4,22,6,16,16,5,1,16,5,4,38,38,38,38,38,38,38,38,38,38,38,38,38,38,6,1,16,11,16,4,28,22,22,6,16,16,3,3,3,16,16,4,22,6,16,16,16,16,16,12,4,28,6,1,4,28,6,4,22,6,38,38,38,38,38,38,38,38,38,38,38,38,38,38,6,16,16,16,16,4,28,22,28,6,16,16,16,16,15,16,16,16,3,16,16,16,5,16,16,16,16,3,14,15,16,3,16,16,3,4,38,38,38,38,38,38,38,38,38,38,38,38,38,38,6,16,5,5,16,4,22,28,28,6,16,16,16,16,16,16,16,16,16,16,1,4,22,7,5,15,19,5,5,5,16,11,16,16,11,4,38,38,38,38,38,38,38,38,38,38,38,38,38,38,6,16,22,28,2,16,3,3,3,16,16,2,16,11,16,11,16,16,39,40,41,4,22,22,22,6,4,33,22,33,6,16,16,16,16,4,38,38,38,38,38,38,38,38,38,38,38,38,38,38,6,18,3,3,16,16,16,16,18,16,16,16,16,11,5,5,5,16,42,43,44,16,3,3,3,16,16,3,3,3,16,16,16,16,16,4,38,38,38,38,38,38,38,38,38,38,38,38,38,38,6,16,16,16,16,16,5,5,5,16,15,16,16,4,28,22,33,6,45,46,47,16,16,15,12,19,16,16,16,1,16,16,16,5,16,4,38,38,38,38,38,38,38,38,38,38,38,38,38,38,6,16,16,16,16,4,28,28,22,6,16,16,16,16,3,3,3,16,16,16,16,16,20,16,19,16,20,5,5,5,16,16,4,22,6,4,38,38,38,38,38,38,38,38,38,38,38,38,38,38,6,11,5,16,1,4,28,33,28,6,16,15,16,16,20,16,16,16,5,5,16,16,21,5,16,16,4,28,22,33,6,16,16,3,16,4,38,38,38,38,38,38,38,38,38,38,38,38,38,38,6,4,22,6,16,4,22,28,28,6,16,16,16,16,2,16,16,4,28,33,6,16,4,22,6,2,16,3,3,3,16,16,16,5,16,4,38,38,38,38,38,38,38,38,38,38,38,38,38,38,6,16,3,16,16,4,28,22,33,6,16,5,5,5,5,16,16,4,33,22,6,16,4,33,6,16,11,16,16,16,11,16,16,22,21,4,38,38,38,38,38,38,38,38,38,38,38,38,38,38,6,16,16,15,16,16,3,3,3,16,4,22,33,38,28,6,16,16,3,20,16,4,22,38,6,16,16,12,16,16,16,1,16,28,16,4,38,38,38,38,38,38,38,38,38,38,38,38,38,38,6,16,11,16,16,15,5,16,16,15,19,3,3,3,3,16,16,16,16,16,15,16,3,3,16,16,11,16,5,16,16,16,16,33,16,4,38,38,38,38,38,38,38,38,38,38,38,38,38,38,6,12,5,16,16,4,22,7,16,16,19,2,20,16,16,16,16,16,15,16,16,14,16,16,11,20,16,8,33,7,16,16,16,16,16,4,38,38,38,38,38,38,38,38,38,38,38,38,38,38,6,4,22,6,16,4,33,28,6,16,5,5,16,16,16,16,5,1,16,18,16,16,16,16,16,16,4,28,22,28,6,16,16,16,16,4,38,38,38,38,38,38,38,38,38,38,38,38,38,38,6,16,3,16,16,4,28,33,6,4,33,22,7,17,17,17,22,16,16,16,5,16,16,16,16,16,16,9,22,33,6,12,16,1,16,4,38,38,38,38,38,38,38,38,38,38,38,38,38,38,6,2,16,12,16,4,22,28,6,16,9,28,28,6,17,17,33,16,16,16,33,16,16,15,16,2,16,16,3,3,16,16,16,16,11,4,38,38,38,38,38,38,38,38,38,38,38,38,38,38,6,16,16,15,16,4,38,28,6,11,4,28,22,6,17,17,16,16,16,11,28,33,16,16,16,5,5,5,11,16,16,5,5,16,16,4,38,38,38,38,38,38,38,38,38,38,38,38,38,38,6,16,16,16,16,16,3,3,16,16,16,3,3,16,16,16,16,1,16,16,16,16,16,18,4,22,28,28,6,12,4,28,22,6,16,4,38,38,38,38,38,38,38,38,38,38,38,38,38,38,6,16,16,5,5,5,16,12,16,16,21,16,16,11,16,16,5,5,5,5,5,16,11,16,16,9,22,10,16,16,16,3,3,16,16,4,38,38,38,38,38,38,38,38,38,38,38,38,38,38,6,11,4,22,28,22,6,16,18,15,16,16,2,16,16,4,28,22,33,28,22,6,16,16,16,16,3,16,16,16,16,21,16,16,2,4,38,38,38,38,38,38,38,38,38,38,38,38,38,38,6,1,16,3,3,3,16,15,16,12,11,16,1,16,16,16,3,3,3,3,3,2,16,18,12,16,14,16,11,16,16,11,1,16,15,4,38,38,38,38,38,38,38,38,38,38,38,38,38,38,7,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,8,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38]}var n,r;return n=e,(r=[{key:"getTile",value:function(e,t){return this.tiles[t*this.cols+e]}},{key:"isPositionLava",value:function(e,t){var n=4*t,r=Math.floor(e.x/this.tsize),o=Math.floor((e.y+11+n/2)/this.tsize),i=this.tiles[o*this.cols+r];return 38==i||22==i||28==i||33==i}}])&&t(n.prototype,r),e}()},729:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,r,i,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new o(r,i||e,a),u=n?n+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,o=[];if(0===this._eventsCount)return o;for(r in e=this._events)t.call(e,r)&&o.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,i=r.length,a=new Array(i);o<i;o++)a[o]=r[o].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,o,i,a){var s=n?n+e:e;if(!this._events[s])return!1;var u,l,c=this._events[s],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,o),!0;case 5:return c.fn.call(c.context,t,r,o,i),!0;case 6:return c.fn.call(c.context,t,r,o,i,a),!0}for(l=1,u=new Array(d-1);l<d;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var f,_=c.length;for(l=0;l<_;l++)switch(c[l].once&&this.removeListener(e,c[l].fn,void 0,!0),d){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,t);break;case 3:c[l].fn.call(c[l].context,t,r);break;case 4:c[l].fn.call(c[l].context,t,r,o);break;default:if(!u)for(f=1,u=new Array(d-1);f<d;f++)u[f-1]=arguments[f];c[l].fn.apply(c[l].context,u)}}return!0},s.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,o){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return a(this,i),this;var s=this._events[i];if(s.fn)s.fn!==t||o&&!s.once||r&&s.context!==r||a(this,i);else{for(var u=0,l=[],c=s.length;u<c;u++)(s[u].fn!==t||o&&!s[u].once||r&&s[u].context!==r)&&l.push(s[u]);l.length?this._events[i]=1===l.length?l[0]:l:a(this,i)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s},766:(e,t,n)=>{var r;!function(){"use strict";var o=function(){this.init()};o.prototype={init:function(){var e=this||i;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var t=this||i;if(e=parseFloat(e),t.ctx||_(),void 0!==e&&e>=0&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e,i.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var r=t._howls[n]._getSoundIds(),o=0;o<r.length;o++){var a=t._howls[n]._soundById(r[o]);a&&a._node&&(a._node.volume=a._volume*e)}return t}return t._volume},mute:function(e){var t=this||i;t.ctx||_(),t._muted=e,t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e?0:t._volume,i.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var r=t._howls[n]._getSoundIds(),o=0;o<r.length;o++){var a=t._howls[n]._soundById(r[o]);a&&a._node&&(a._node.muted=!!e||a._muted)}return t},stop:function(){for(var e=this||i,t=0;t<e._howls.length;t++)e._howls[t].stop();return e},unload:function(){for(var e=this||i,t=e._howls.length-1;t>=0;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,_()),e},codecs:function(e){return(this||i)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||i;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(e._canPlayEvent="canplay")}catch(t){e.noAudio=!0}else e.noAudio=!0;try{(new Audio).muted&&(e.noAudio=!0)}catch(e){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||i,t=null;try{t="undefined"!=typeof Audio?new Audio:null}catch(t){return e}if(!t||"function"!=typeof t.canPlayType)return e;var n=t.canPlayType("audio/mpeg;").replace(/^no$/,""),r=e._navigator&&e._navigator.userAgent.match(/OPR\/([0-6].)/g),o=r&&parseInt(r[0].split("/")[1],10)<33;return e._codecs={mp3:!(o||!n&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(t.canPlayType('audio/wav; codecs="1"')||t.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(t.canPlayType("audio/x-m4b;")||t.canPlayType("audio/m4b;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||i;if(!e._audioUnlocked&&e.ctx){e._audioUnlocked=!1,e.autoUnlock=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var t=function(n){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var r=new Audio;r._unlocked=!0,e._releaseHtml5Audio(r)}catch(n){e.noAudio=!0;break}for(var o=0;o<e._howls.length;o++)if(!e._howls[o]._webAudio)for(var i=e._howls[o]._getSoundIds(),a=0;a<i.length;a++){var s=e._howls[o]._soundById(i[a]);s&&s._node&&!s._node._unlocked&&(s._node._unlocked=!0,s._node.load())}e._autoResume();var u=e.ctx.createBufferSource();u.buffer=e._scratchBuffer,u.connect(e.ctx.destination),void 0===u.start?u.noteOn(0):u.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),u.onended=function(){u.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",t,!0),document.removeEventListener("touchend",t,!0),document.removeEventListener("click",t,!0);for(var n=0;n<e._howls.length;n++)e._howls[n]._emit("unlock")}};return document.addEventListener("touchstart",t,!0),document.addEventListener("touchend",t,!0),document.addEventListener("click",t,!0),e}},_obtainHtml5Audio:function(){var e=this||i;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var t=(new Audio).play();return t&&"undefined"!=typeof Promise&&(t instanceof Promise||"function"==typeof t.then)&&t.catch((function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")})),new Audio},_releaseHtml5Audio:function(e){var t=this||i;return e._unlocked&&t._html5AudioPool.push(e),t},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&i.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio)for(var n=0;n<e._howls[t]._sounds.length;n++)if(!e._howls[t]._sounds[n]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout((function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var t=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(t,t)}}),3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&i.usingWebAudio)return"running"===e.state&&"interrupted"!==e.ctx.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state||"running"===e.state&&"interrupted"===e.ctx.state?(e.ctx.resume().then((function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")})),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var i=new o,a=function(e){e.src&&0!==e.src.length?this.init(e):console.error("An array of source files must be passed with any new Howl.")};a.prototype={init:function(e){var t=this;return i.ctx||_(),t._autoplay=e.autoplay||!1,t._format="string"!=typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!=typeof e.preload&&"metadata"!==e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!=typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:!(!e.xhr||!e.xhr.withCredentials)&&e.xhr.withCredentials},t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._playLock=!1,t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onunlock=e.onunlock?[{fn:e.onunlock}]:[],t._onresume=[],t._webAudio=i.usingWebAudio&&!t._html5,void 0!==i.ctx&&i.ctx&&i.autoUnlock&&i._unlockAudio(),i._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&"none"!==t._preload&&t.load(),t},load:function(){var e=this,t=null;if(i.noAudio)e._emit("loaderror",null,"No audio support.");else{"string"==typeof e._src&&(e._src=[e._src]);for(var n=0;n<e._src.length;n++){var r,o;if(e._format&&e._format[n])r=e._format[n];else{if("string"!=typeof(o=e._src[n])){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(r=/^data:audio\/([^;,]+);/i.exec(o))||(r=/\.([^.]+)$/.exec(o.split("?",1)[0])),r&&(r=r[1].toLowerCase())}if(r||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),r&&i.codecs(r)){t=e._src[n];break}}if(t)return e._src=t,e._state="loading","https:"===window.location.protocol&&"http:"===t.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new s(e),e._webAudio&&l(e),e;e._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(e,t){var n=this,r=null;if("number"==typeof e)r=e,e=null;else{if("string"==typeof e&&"loaded"===n._state&&!n._sprite[e])return null;if(void 0===e&&(e="__default",!n._playLock)){for(var o=0,a=0;a<n._sounds.length;a++)n._sounds[a]._paused&&!n._sounds[a]._ended&&(o++,r=n._sounds[a]._id);1===o?e=null:r=null}}var s=r?n._soundById(r):n._inactiveSound();if(!s)return null;if(r&&!e&&(e=s._sprite||"__default"),"loaded"!==n._state){s._sprite=e,s._ended=!1;var u=s._id;return n._queue.push({event:"play",action:function(){n.play(u)}}),u}if(r&&!s._paused)return t||n._loadQueue("play"),s._id;n._webAudio&&i._autoResume();var l=Math.max(0,s._seek>0?s._seek:n._sprite[e][0]/1e3),c=Math.max(0,(n._sprite[e][0]+n._sprite[e][1])/1e3-l),d=1e3*c/Math.abs(s._rate),f=n._sprite[e][0]/1e3,_=(n._sprite[e][0]+n._sprite[e][1])/1e3;s._sprite=e,s._ended=!1;var h=function(){s._paused=!1,s._seek=l,s._start=f,s._stop=_,s._loop=!(!s._loop&&!n._sprite[e][2])};if(!(l>=_)){var p=s._node;if(n._webAudio){var m=function(){n._playLock=!1,h(),n._refreshBuffer(s);var e=s._muted||n._muted?0:s._volume;p.gain.setValueAtTime(e,i.ctx.currentTime),s._playStart=i.ctx.currentTime,void 0===p.bufferSource.start?s._loop?p.bufferSource.noteGrainOn(0,l,86400):p.bufferSource.noteGrainOn(0,l,c):s._loop?p.bufferSource.start(0,l,86400):p.bufferSource.start(0,l,c),d!==1/0&&(n._endTimers[s._id]=setTimeout(n._ended.bind(n,s),d)),t||setTimeout((function(){n._emit("play",s._id),n._loadQueue()}),0)};"running"===i.state&&"interrupted"!==i.ctx.state?m():(n._playLock=!0,n.once("resume",m),n._clearTimer(s._id))}else{var v=function(){p.currentTime=l,p.muted=s._muted||n._muted||i._muted||p.muted,p.volume=s._volume*i.volume(),p.playbackRate=s._rate;try{var r=p.play();if(r&&"undefined"!=typeof Promise&&(r instanceof Promise||"function"==typeof r.then)?(n._playLock=!0,h(),r.then((function(){n._playLock=!1,p._unlocked=!0,t||(n._emit("play",s._id),n._loadQueue())})).catch((function(){n._playLock=!1,n._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),s._ended=!0,s._paused=!0}))):t||(n._playLock=!1,h(),n._emit("play",s._id),n._loadQueue()),p.playbackRate=s._rate,p.paused)return void n._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||s._loop?n._endTimers[s._id]=setTimeout(n._ended.bind(n,s),d):(n._endTimers[s._id]=function(){n._ended(s),p.removeEventListener("ended",n._endTimers[s._id],!1)},p.addEventListener("ended",n._endTimers[s._id],!1))}catch(e){n._emit("playerror",s._id,e)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===p.src&&(p.src=n._src,p.load());var y=window&&window.ejecta||!p.readyState&&i._navigator.isCocoonJS;if(p.readyState>=3||y)v();else{n._playLock=!0;var g=function(){v(),p.removeEventListener(i._canPlayEvent,g,!1)};p.addEventListener(i._canPlayEvent,g,!1),n._clearTimer(s._id)}}return s._id}n._ended(s)},pause:function(e){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var n=t._getSoundIds(e),r=0;r<n.length;r++){t._clearTimer(n[r]);var o=t._soundById(n[r]);if(o&&!o._paused&&(o._seek=t.seek(n[r]),o._rateSeek=0,o._paused=!0,t._stopFade(n[r]),o._node))if(t._webAudio){if(!o._node.bufferSource)continue;void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),t._cleanBuffer(o._node)}else isNaN(o._node.duration)&&o._node.duration!==1/0||o._node.pause();arguments[1]||t._emit("pause",o?o._id:null)}return t},stop:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"stop",action:function(){n.stop(e)}}),n;for(var r=n._getSoundIds(e),o=0;o<r.length;o++){n._clearTimer(r[o]);var i=n._soundById(r[o]);i&&(i._seek=i._start||0,i._rateSeek=0,i._paused=!0,i._ended=!0,n._stopFade(r[o]),i._node&&(n._webAudio?i._node.bufferSource&&(void 0===i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),n._cleanBuffer(i._node)):isNaN(i._node.duration)&&i._node.duration!==1/0||(i._node.currentTime=i._start||0,i._node.pause(),i._node.duration===1/0&&n._clearSound(i._node))),t||n._emit("stop",i._id))}return n},mute:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"mute",action:function(){n.mute(e,t)}}),n;if(void 0===t){if("boolean"!=typeof e)return n._muted;n._muted=e}for(var r=n._getSoundIds(t),o=0;o<r.length;o++){var a=n._soundById(r[o]);a&&(a._muted=e,a._interval&&n._stopFade(a._id),n._webAudio&&a._node?a._node.gain.setValueAtTime(e?0:a._volume,i.ctx.currentTime):a._node&&(a._node.muted=!!i._muted||e),n._emit("mute",a._id))}return n},volume:function(){var e,t,n,r=this,o=arguments;if(0===o.length)return r._volume;if(1===o.length||2===o.length&&void 0===o[1]){var a=r._getSoundIds(),s=a.indexOf(o[0]);s>=0?t=parseInt(o[0],10):e=parseFloat(o[0])}else o.length>=2&&(e=parseFloat(o[0]),t=parseInt(o[1],10));if(!(void 0!==e&&e>=0&&e<=1))return(n=t?r._soundById(t):r._sounds[0])?n._volume:0;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"volume",action:function(){r.volume.apply(r,o)}}),r;void 0===t&&(r._volume=e),t=r._getSoundIds(t);for(var u=0;u<t.length;u++)(n=r._soundById(t[u]))&&(n._volume=e,o[2]||r._stopFade(t[u]),r._webAudio&&n._node&&!n._muted?n._node.gain.setValueAtTime(e,i.ctx.currentTime):n._node&&!n._muted&&(n._node.volume=e*i.volume()),r._emit("volume",n._id));return r},fade:function(e,t,n,r){var o=this;if("loaded"!==o._state||o._playLock)return o._queue.push({event:"fade",action:function(){o.fade(e,t,n,r)}}),o;e=Math.min(Math.max(0,parseFloat(e)),1),t=Math.min(Math.max(0,parseFloat(t)),1),n=parseFloat(n),o.volume(e,r);for(var a=o._getSoundIds(r),s=0;s<a.length;s++){var u=o._soundById(a[s]);if(u){if(r||o._stopFade(a[s]),o._webAudio&&!u._muted){var l=i.ctx.currentTime,c=l+n/1e3;u._volume=e,u._node.gain.setValueAtTime(e,l),u._node.gain.linearRampToValueAtTime(t,c)}o._startFadeInterval(u,e,t,n,a[s],void 0===r)}}return o},_startFadeInterval:function(e,t,n,r,o,i){var a=this,s=t,u=n-t,l=Math.abs(u/.01),c=Math.max(4,l>0?r/l:r),d=Date.now();e._fadeTo=n,e._interval=setInterval((function(){var o=(Date.now()-d)/r;d=Date.now(),s+=u*o,s=Math.round(100*s)/100,s=u<0?Math.max(n,s):Math.min(n,s),a._webAudio?e._volume=s:a.volume(s,e._id,!0),i&&(a._volume=s),(n<t&&s<=n||n>t&&s>=n)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,a.volume(n,e._id),a._emit("fade",e._id))}),c)},_stopFade:function(e){var t=this,n=t._soundById(e);return n&&n._interval&&(t._webAudio&&n._node.gain.cancelScheduledValues(i.ctx.currentTime),clearInterval(n._interval),n._interval=null,t.volume(n._fadeTo,e),n._fadeTo=null,t._emit("fade",e)),t},loop:function(){var e,t,n,r=this,o=arguments;if(0===o.length)return r._loop;if(1===o.length){if("boolean"!=typeof o[0])return!!(n=r._soundById(parseInt(o[0],10)))&&n._loop;e=o[0],r._loop=e}else 2===o.length&&(e=o[0],t=parseInt(o[1],10));for(var i=r._getSoundIds(t),a=0;a<i.length;a++)(n=r._soundById(i[a]))&&(n._loop=e,r._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=e,e&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop)));return r},rate:function(){var e,t,n,r=this,o=arguments;if(0===o.length)t=r._sounds[0]._id;else if(1===o.length){var a=r._getSoundIds(),s=a.indexOf(o[0]);s>=0?t=parseInt(o[0],10):e=parseFloat(o[0])}else 2===o.length&&(e=parseFloat(o[0]),t=parseInt(o[1],10));if("number"!=typeof e)return(n=r._soundById(t))?n._rate:r._rate;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"rate",action:function(){r.rate.apply(r,o)}}),r;void 0===t&&(r._rate=e),t=r._getSoundIds(t);for(var u=0;u<t.length;u++)if(n=r._soundById(t[u])){r.playing(t[u])&&(n._rateSeek=r.seek(t[u]),n._playStart=r._webAudio?i.ctx.currentTime:n._playStart),n._rate=e,r._webAudio&&n._node&&n._node.bufferSource?n._node.bufferSource.playbackRate.setValueAtTime(e,i.ctx.currentTime):n._node&&(n._node.playbackRate=e);var l=r.seek(t[u]),c=(r._sprite[n._sprite][0]+r._sprite[n._sprite][1])/1e3-l,d=1e3*c/Math.abs(n._rate);!r._endTimers[t[u]]&&n._paused||(r._clearTimer(t[u]),r._endTimers[t[u]]=setTimeout(r._ended.bind(r,n),d)),r._emit("rate",n._id)}return r},seek:function(){var e,t,n=this,r=arguments;if(0===r.length)t=n._sounds[0]._id;else if(1===r.length){var o=n._getSoundIds(),a=o.indexOf(r[0]);a>=0?t=parseInt(r[0],10):n._sounds.length&&(t=n._sounds[0]._id,e=parseFloat(r[0]))}else 2===r.length&&(e=parseFloat(r[0]),t=parseInt(r[1],10));if(void 0===t)return n;if("number"==typeof e&&("loaded"!==n._state||n._playLock))return n._queue.push({event:"seek",action:function(){n.seek.apply(n,r)}}),n;var s=n._soundById(t);if(s){if(!("number"==typeof e&&e>=0)){if(n._webAudio){var u=n.playing(t)?i.ctx.currentTime-s._playStart:0,l=s._rateSeek?s._rateSeek-s._seek:0;return s._seek+(l+u*Math.abs(s._rate))}return s._node.currentTime}var c=n.playing(t);c&&n.pause(t,!0),s._seek=e,s._ended=!1,n._clearTimer(t),n._webAudio||!s._node||isNaN(s._node.duration)||(s._node.currentTime=e);var d=function(){n._emit("seek",t),c&&n.play(t,!0)};if(c&&!n._webAudio){var f=function(){n._playLock?setTimeout(f,0):d()};setTimeout(f,0)}else d()}return n},playing:function(e){var t=this;if("number"==typeof e){var n=t._soundById(e);return!!n&&!n._paused}for(var r=0;r<t._sounds.length;r++)if(!t._sounds[r]._paused)return!0;return!1},duration:function(e){var t=this,n=t._duration,r=t._soundById(e);return r&&(n=t._sprite[r._sprite][1]/1e3),n},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,n=0;n<t.length;n++)t[n]._paused||e.stop(t[n]._id),e._webAudio||(e._clearSound(t[n]._node),t[n]._node.removeEventListener("error",t[n]._errorFn,!1),t[n]._node.removeEventListener(i._canPlayEvent,t[n]._loadFn,!1),t[n]._node.removeEventListener("ended",t[n]._endFn,!1),i._releaseHtml5Audio(t[n]._node)),delete t[n]._node,e._clearTimer(t[n]._id);var r=i._howls.indexOf(e);r>=0&&i._howls.splice(r,1);var o=!0;for(n=0;n<i._howls.length;n++)if(i._howls[n]._src===e._src||e._src.indexOf(i._howls[n]._src)>=0){o=!1;break}return u&&o&&delete u[e._src],i.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,n,r){var o=this["_on"+e];return"function"==typeof t&&o.push(r?{id:n,fn:t,once:r}:{id:n,fn:t}),this},off:function(e,t,n){var r=this,o=r["_on"+e],i=0;if("number"==typeof t&&(n=t,t=null),t||n)for(i=0;i<o.length;i++){var a=n===o[i].id;if(t===o[i].fn&&a||!t&&a){o.splice(i,1);break}}else if(e)r["_on"+e]=[];else{var s=Object.keys(r);for(i=0;i<s.length;i++)0===s[i].indexOf("_on")&&Array.isArray(r[s[i]])&&(r[s[i]]=[])}return r},once:function(e,t,n){return this.on(e,t,n,1),this},_emit:function(e,t,n){for(var r=this,o=r["_on"+e],i=o.length-1;i>=0;i--)o[i].id&&o[i].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,n)}.bind(r,o[i].fn),0),o[i].once&&r.off(e,o[i].fn,o[i].id));return r._loadQueue(e),r},_loadQueue:function(e){var t=this;if(t._queue.length>0){var n=t._queue[0];n.event===e&&(t._queue.shift(),t._loadQueue()),e||n.action()}return t},_ended:function(e){var t=this,n=e._sprite;if(!t._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(t._ended.bind(t,e),100),t;var r=!(!e._loop&&!t._sprite[n][2]);if(t._emit("end",e._id),!t._webAudio&&r&&t.stop(e._id,!0).play(e._id),t._webAudio&&r){t._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=i.ctx.currentTime;var o=1e3*(e._stop-e._start)/Math.abs(e._rate);t._endTimers[e._id]=setTimeout(t._ended.bind(t,e),o)}return t._webAudio&&!r&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,t._clearTimer(e._id),t._cleanBuffer(e._node),i._autoSuspend()),t._webAudio||r||t.stop(e._id,!0),t},_clearTimer:function(e){var t=this;if(t._endTimers[e]){if("function"!=typeof t._endTimers[e])clearTimeout(t._endTimers[e]);else{var n=t._soundById(e);n&&n._node&&n._node.removeEventListener("ended",t._endTimers[e],!1)}delete t._endTimers[e]}return t},_soundById:function(e){for(var t=this,n=0;n<t._sounds.length;n++)if(e===t._sounds[n]._id)return t._sounds[n];return null},_inactiveSound:function(){var e=this;e._drain();for(var t=0;t<e._sounds.length;t++)if(e._sounds[t]._ended)return e._sounds[t].reset();return new s(e)},_drain:function(){var e=this,t=e._pool,n=0,r=0;if(!(e._sounds.length<t)){for(r=0;r<e._sounds.length;r++)e._sounds[r]._ended&&n++;for(r=e._sounds.length-1;r>=0;r--){if(n<=t)return;e._sounds[r]._ended&&(e._webAudio&&e._sounds[r]._node&&e._sounds[r]._node.disconnect(0),e._sounds.splice(r,1),n--)}}},_getSoundIds:function(e){if(void 0===e){for(var t=[],n=0;n<this._sounds.length;n++)t.push(this._sounds[n]._id);return t}return[e]},_refreshBuffer:function(e){return e._node.bufferSource=i.ctx.createBufferSource(),e._node.bufferSource.buffer=u[this._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,i.ctx.currentTime),this},_cleanBuffer:function(e){var t=i._navigator&&i._navigator.vendor.indexOf("Apple")>=0;if(i._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),t))try{e.bufferSource.buffer=i._scratchBuffer}catch(e){}return e.bufferSource=null,this},_clearSound:function(e){/MSIE |Trident\//.test(i._navigator&&i._navigator.userAgent)||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var s=function(e){this._parent=e,this.init()};s.prototype={init:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++i._counter,t._sounds.push(e),e.create(),e},create:function(){var e=this,t=e._parent,n=i._muted||e._muted||e._parent._muted?0:e._volume;return t._webAudio?(e._node=void 0===i.ctx.createGain?i.ctx.createGainNode():i.ctx.createGain(),e._node.gain.setValueAtTime(n,i.ctx.currentTime),e._node.paused=!0,e._node.connect(i.masterGain)):i.noAudio||(e._node=i._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(i._canPlayEvent,e._loadFn,!1),e._endFn=e._endListener.bind(e),e._node.addEventListener("ended",e._endFn,!1),e._node.src=t._src,e._node.preload=!0===t._preload?"auto":t._preload,e._node.volume=n*i.volume(),e._node.load()),e},reset:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++i._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,t=e._parent;t._duration=Math.ceil(10*e._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue()),e._node.removeEventListener(i._canPlayEvent,e._loadFn,!1)},_endListener:function(){var e=this,t=e._parent;t._duration===1/0&&(t._duration=Math.ceil(10*e._node.duration)/10,t._sprite.__default[1]===1/0&&(t._sprite.__default[1]=1e3*t._duration),t._ended(e)),e._node.removeEventListener("ended",e._endFn,!1)}};var u={},l=function(e){var t=e._src;if(u[t])return e._duration=u[t].duration,void f(e);if(/^data:[^;]+;base64,/.test(t)){for(var n=atob(t.split(",")[1]),r=new Uint8Array(n.length),o=0;o<n.length;++o)r[o]=n.charCodeAt(o);d(r.buffer,e)}else{var i=new XMLHttpRequest;i.open(e._xhr.method,t,!0),i.withCredentials=e._xhr.withCredentials,i.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach((function(t){i.setRequestHeader(t,e._xhr.headers[t])})),i.onload=function(){var t=(i.status+"")[0];"0"===t||"2"===t||"3"===t?d(i.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+i.status+".")},i.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete u[t],e.load())},c(i)}},c=function(e){try{e.send()}catch(t){e.onerror()}},d=function(e,t){var n=function(){t._emit("loaderror",null,"Decoding audio data failed.")},r=function(e){e&&t._sounds.length>0?(u[t._src]=e,f(t,e)):n()};"undefined"!=typeof Promise&&1===i.ctx.decodeAudioData.length?i.ctx.decodeAudioData(e).then(r).catch(n):i.ctx.decodeAudioData(e,r,n)},f=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},_=function(){if(i.usingWebAudio){try{"undefined"!=typeof AudioContext?i.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?i.ctx=new webkitAudioContext:i.usingWebAudio=!1}catch(e){i.usingWebAudio=!1}i.ctx||(i.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(i._navigator&&i._navigator.platform),t=i._navigator&&i._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=t?parseInt(t[1],10):null;if(e&&n&&n<9){var r=/safari/.test(i._navigator&&i._navigator.userAgent.toLowerCase());i._navigator&&!r&&(i.usingWebAudio=!1)}i.usingWebAudio&&(i.masterGain=void 0===i.ctx.createGain?i.ctx.createGainNode():i.ctx.createGain(),i.masterGain.gain.setValueAtTime(i._muted?0:i._volume,i.ctx.currentTime),i.masterGain.connect(i.ctx.destination)),i._setup()}};void 0===(r=function(){return{Howler:i,Howl:a}}.apply(t,[]))||(e.exports=r),t.Howler=i,t.Howl=a,void 0!==n.g?(n.g.HowlerGlobal=o,n.g.Howler=i,n.g.Howl=a,n.g.Sound=s):"undefined"!=typeof window&&(window.HowlerGlobal=o,window.Howler=i,window.Howl=a,window.Sound=s)}(),function(){"use strict";var e;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){var t=this;if(!t.ctx||!t.ctx.listener)return t;for(var n=t._howls.length-1;n>=0;n--)t._howls[n].stereo(e);return t},HowlerGlobal.prototype.pos=function(e,t,n){var r=this;return r.ctx&&r.ctx.listener?(t="number"!=typeof t?r._pos[1]:t,n="number"!=typeof n?r._pos[2]:n,"number"!=typeof e?r._pos:(r._pos=[e,t,n],void 0!==r.ctx.listener.positionX?(r.ctx.listener.positionX.setTargetAtTime(r._pos[0],Howler.ctx.currentTime,.1),r.ctx.listener.positionY.setTargetAtTime(r._pos[1],Howler.ctx.currentTime,.1),r.ctx.listener.positionZ.setTargetAtTime(r._pos[2],Howler.ctx.currentTime,.1)):r.ctx.listener.setPosition(r._pos[0],r._pos[1],r._pos[2]),r)):r},HowlerGlobal.prototype.orientation=function(e,t,n,r,o,i){var a=this;if(!a.ctx||!a.ctx.listener)return a;var s=a._orientation;return t="number"!=typeof t?s[1]:t,n="number"!=typeof n?s[2]:n,r="number"!=typeof r?s[3]:r,o="number"!=typeof o?s[4]:o,i="number"!=typeof i?s[5]:i,"number"!=typeof e?s:(a._orientation=[e,t,n,r,o,i],void 0!==a.ctx.listener.forwardX?(a.ctx.listener.forwardX.setTargetAtTime(e,Howler.ctx.currentTime,.1),a.ctx.listener.forwardY.setTargetAtTime(t,Howler.ctx.currentTime,.1),a.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),a.ctx.listener.upX.setTargetAtTime(r,Howler.ctx.currentTime,.1),a.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),a.ctx.listener.upZ.setTargetAtTime(i,Howler.ctx.currentTime,.1)):a.ctx.listener.setOrientation(e,t,n,r,o,i),a)},Howl.prototype.init=(e=Howl.prototype.init,function(t){var n=this;return n._orientation=t.orientation||[1,0,0],n._stereo=t.stereo||null,n._pos=t.pos||null,n._pannerAttr={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:0,distanceModel:void 0!==t.distanceModel?t.distanceModel:"inverse",maxDistance:void 0!==t.maxDistance?t.maxDistance:1e4,panningModel:void 0!==t.panningModel?t.panningModel:"HRTF",refDistance:void 0!==t.refDistance?t.refDistance:1,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:1},n._onstereo=t.onstereo?[{fn:t.onstereo}]:[],n._onpos=t.onpos?[{fn:t.onpos}]:[],n._onorientation=t.onorientation?[{fn:t.onorientation}]:[],e.call(this,t)}),Howl.prototype.stereo=function(e,n){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"stereo",action:function(){r.stereo(e,n)}}),r;var o=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===n){if("number"!=typeof e)return r._stereo;r._stereo=e,r._pos=[e,0,0]}for(var i=r._getSoundIds(n),a=0;a<i.length;a++){var s=r._soundById(i[a]);if(s){if("number"!=typeof e)return s._stereo;s._stereo=e,s._pos=[e,0,0],s._node&&(s._pannerAttr.panningModel="equalpower",s._panner&&s._panner.pan||t(s,o),"spatial"===o?void 0!==s._panner.positionX?(s._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):s._panner.setPosition(e,0,0):s._panner.pan.setValueAtTime(e,Howler.ctx.currentTime)),r._emit("stereo",s._id)}}return r},Howl.prototype.pos=function(e,n,r,o){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"pos",action:function(){i.pos(e,n,r,o)}}),i;if(n="number"!=typeof n?0:n,r="number"!=typeof r?-.5:r,void 0===o){if("number"!=typeof e)return i._pos;i._pos=[e,n,r]}for(var a=i._getSoundIds(o),s=0;s<a.length;s++){var u=i._soundById(a[s]);if(u){if("number"!=typeof e)return u._pos;u._pos=[e,n,r],u._node&&(u._panner&&!u._panner.pan||t(u,"spatial"),void 0!==u._panner.positionX?(u._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),u._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),u._panner.positionZ.setValueAtTime(r,Howler.ctx.currentTime)):u._panner.setPosition(e,n,r)),i._emit("pos",u._id)}}return i},Howl.prototype.orientation=function(e,n,r,o){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"orientation",action:function(){i.orientation(e,n,r,o)}}),i;if(n="number"!=typeof n?i._orientation[1]:n,r="number"!=typeof r?i._orientation[2]:r,void 0===o){if("number"!=typeof e)return i._orientation;i._orientation=[e,n,r]}for(var a=i._getSoundIds(o),s=0;s<a.length;s++){var u=i._soundById(a[s]);if(u){if("number"!=typeof e)return u._orientation;u._orientation=[e,n,r],u._node&&(u._panner||(u._pos||(u._pos=i._pos||[0,0,-.5]),t(u,"spatial")),void 0!==u._panner.orientationX?(u._panner.orientationX.setValueAtTime(e,Howler.ctx.currentTime),u._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),u._panner.orientationZ.setValueAtTime(r,Howler.ctx.currentTime)):u._panner.setOrientation(e,n,r)),i._emit("orientation",u._id)}}return i},Howl.prototype.pannerAttr=function(){var e,n,r,o=this,i=arguments;if(!o._webAudio)return o;if(0===i.length)return o._pannerAttr;if(1===i.length){if("object"!=typeof i[0])return(r=o._soundById(parseInt(i[0],10)))?r._pannerAttr:o._pannerAttr;e=i[0],void 0===n&&(e.pannerAttr||(e.pannerAttr={coneInnerAngle:e.coneInnerAngle,coneOuterAngle:e.coneOuterAngle,coneOuterGain:e.coneOuterGain,distanceModel:e.distanceModel,maxDistance:e.maxDistance,refDistance:e.refDistance,rolloffFactor:e.rolloffFactor,panningModel:e.panningModel}),o._pannerAttr={coneInnerAngle:void 0!==e.pannerAttr.coneInnerAngle?e.pannerAttr.coneInnerAngle:o._coneInnerAngle,coneOuterAngle:void 0!==e.pannerAttr.coneOuterAngle?e.pannerAttr.coneOuterAngle:o._coneOuterAngle,coneOuterGain:void 0!==e.pannerAttr.coneOuterGain?e.pannerAttr.coneOuterGain:o._coneOuterGain,distanceModel:void 0!==e.pannerAttr.distanceModel?e.pannerAttr.distanceModel:o._distanceModel,maxDistance:void 0!==e.pannerAttr.maxDistance?e.pannerAttr.maxDistance:o._maxDistance,refDistance:void 0!==e.pannerAttr.refDistance?e.pannerAttr.refDistance:o._refDistance,rolloffFactor:void 0!==e.pannerAttr.rolloffFactor?e.pannerAttr.rolloffFactor:o._rolloffFactor,panningModel:void 0!==e.pannerAttr.panningModel?e.pannerAttr.panningModel:o._panningModel})}else 2===i.length&&(e=i[0],n=parseInt(i[1],10));for(var a=o._getSoundIds(n),s=0;s<a.length;s++)if(r=o._soundById(a[s])){var u=r._pannerAttr;u={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:u.coneInnerAngle,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:u.coneOuterAngle,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:u.coneOuterGain,distanceModel:void 0!==e.distanceModel?e.distanceModel:u.distanceModel,maxDistance:void 0!==e.maxDistance?e.maxDistance:u.maxDistance,refDistance:void 0!==e.refDistance?e.refDistance:u.refDistance,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:u.rolloffFactor,panningModel:void 0!==e.panningModel?e.panningModel:u.panningModel};var l=r._panner;l?(l.coneInnerAngle=u.coneInnerAngle,l.coneOuterAngle=u.coneOuterAngle,l.coneOuterGain=u.coneOuterGain,l.distanceModel=u.distanceModel,l.maxDistance=u.maxDistance,l.refDistance=u.refDistance,l.rolloffFactor=u.rolloffFactor,l.panningModel=u.panningModel):(r._pos||(r._pos=o._pos||[0,0,-.5]),t(r,"spatial"))}return o},Sound.prototype.init=function(e){return function(){var t=this,n=t._parent;t._orientation=n._orientation,t._stereo=n._stereo,t._pos=n._pos,t._pannerAttr=n._pannerAttr,e.call(this),t._stereo?n.stereo(t._stereo):t._pos&&n.pos(t._pos[0],t._pos[1],t._pos[2],t._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var t=this,n=t._parent;return t._orientation=n._orientation,t._stereo=n._stereo,t._pos=n._pos,t._pannerAttr=n._pannerAttr,t._stereo?n.stereo(t._stereo):t._pos?n.pos(t._pos[0],t._pos[1],t._pos[2],t._id):t._panner&&(t._panner.disconnect(0),t._panner=void 0,n._refreshBuffer(t)),e.call(this)}}(Sound.prototype.reset);var t=function(e,t){"spatial"===(t=t||"spatial")?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,void 0!==e._panner.positionX?(e._panner.positionX.setValueAtTime(e._pos[0],Howler.ctx.currentTime),e._panner.positionY.setValueAtTime(e._pos[1],Howler.ctx.currentTime),e._panner.positionZ.setValueAtTime(e._pos[2],Howler.ctx.currentTime)):e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),void 0!==e._panner.orientationX?(e._panner.orientationX.setValueAtTime(e._orientation[0],Howler.ctx.currentTime),e._panner.orientationY.setValueAtTime(e._orientation[1],Howler.ctx.currentTime),e._panner.orientationZ.setValueAtTime(e._orientation[2],Howler.ctx.currentTime)):e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.setValueAtTime(e._stereo,Howler.ctx.currentTime)),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id,!0)}}()}},r={};function o(e){if(r[e])return r[e].exports;var t=r[e]={exports:{}};return n[e].call(t.exports,t,t.exports,o),t.exports}o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e=o(431),t=o(556).validateName,window.onload=function(){var n=new e,r=document.getElementById("play-form"),o=document.getElementsByTagName("body")[0],i=document.getElementById("name-play"),a=document.getElementsByClassName("game-name")[0];i.focus(),r.addEventListener("submit",(function(e){e.preventDefault(),r.style.display="none",a.style.display="none",o.style.background="#000",o.style.cursor="crosshair",n.start(t(i.value))}))}})();